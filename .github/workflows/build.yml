name: Build package

# CI runs over all branches that do not contain 'ros1' in the name
on:
  push:
  schedule:
    - cron: '0 0 * * *'

defaults:
  run:
    shell: bash

jobs:
  jammy:
    name: "Build on Ubuntu Jammy"
    runs-on: ubuntu-22.04
    strategy:
      matrix:
        ros2_distro: [humble, rolling]
    steps:
      - uses: actions/checkout@v4
      - uses: ros-tooling/setup-ros@v0.7
        with:
          required-ros-distributions: ${{ matrix.ros2_distro }}
      - uses: ros-tooling/action-ros-ci@v0.3
        with:
          package-name: px4_msgs
          target-ros2-distro: ${{ matrix.ros2_distro }}
  
  noble:
    name: "Build on Ubuntu Jammy"
    runs-on: ubuntu-24.04
    strategy:
      matrix:
        ros2_distro: [jazzy, rolling]
    steps:
      - uses: actions/checkout@v4
      - uses: ros-tooling/setup-ros@v0.7
        with:
          required-ros-distributions: ${{ matrix.ros2_distro }}
      - uses: ros-tooling/action-ros-ci@v0.3
        with:
          package-name: px4_msgs
          target-ros2-distro: ${{ matrix.ros2_distro }}
